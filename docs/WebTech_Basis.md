**# Web 技術の基本
## Ch.1：Web技術とは
### Web とは
- 正式名称 World Wid Web, 文書を公開・閲覧するためのシステム.
- **ハイパーテキスト**という言語で構成され, **ハイパーリンク**によって世界中のあらゆる Web ページと繋がりを持つ.

### Web の用途
- 文書の閲覧.
  - 1つのドメインの Web ページの集まりを **Webサイト** という.
- 機能とユーザーのやり取りの橋渡しをする**ユーザーインターフェース**を提供.
  - e.g. ユーザーの操作を Webサーバーが代わりにメールサーバーに伝える.
- ソフトウェア同士のやり取りの橋渡しをする **API** を提供.
  - e.g. アプリとWebサーバー間のデータ送受信など.

### HTML とブラウザ
- **HTML** はハイパーテキストを記述するための言語.
  - 表示方法やリンクを**タグ**によって表現するマークアップ言語の一種.
- **Webブラウザ** は HTML を解釈して, わかりやすく作り変えるためのプログラム.

### Webサーバーと HTTP
- **Webサーバー**は, Webブラウザからコンテンツの要求があった場合に, 必要なコンテンツ（ハイパーテキスト）を返すためのプログラム.
  - 「持っていない」という情報や, 別の Webサーバーへの案内といった情報を返すことも可能.
- コンテンツのやり取りに関する手順や送受信するメッセージの書式は **HTTP** という仕様で定義されている.
  - 世界標準であるため, どの企業のどんなブラウザ・Webサーバーでも同じ手順で Webサーバーとのやり取りが可能になっている.

### Webページ
- Webページを取得するには **URL** を指定することがスタートとなる.
  - URL には「どのやり取りの手順で」「どの Webサーバーに」「何のコンテンツを」取得するか, が情報として含まれている.
    - どのやり取りの手順で：http または https
    - どの Webサーバーに：ドメイン
    - 何のコンテンツを：HTML や画像など
  - URL をもとにコンテンツの取得を繰り返していくことで, ユーザーは要求した Webページを閲覧できるようになる.
- Web ページには, **静的ページ**と**動的ページ**の2種類がある.
  - 静的ページ：アクセスのたびに同じコンテンツが表示される Webページ.
  - 動的ページ：アクセスしたときの状況に応じて異なるコンテンツが表示される Webページ.
    - Webブラウザの要求に応じてプログラムが作動しており, それを作動させる仕組みを **GCI** という.
    - したがって, 動的ページでは URL は GCI が用意された場所を示す.
      - GCI から呼び出され, 作動するプログラムは**サーバーサイド・スクリプト**といい, Perl や Python, PHP, JavaScript などの**スクリプト言語**で記述される.
      - 一方で, HTML に埋め込まれ, ブラウザ上で作動するプログラムは**クライアントサイド・スクリプト**といい, 主に JavaScript が該当する.

### Web の標準化と設計思想
- HTML や CSS, XML などは **W3C**（HTML のみ **WHATWG**）によって**標準化**されている, すなわち一定の規格が定められている.
  - これは言語の機能拡張が個々に広がると, 「どの Webブラウザでも, ほぼ同じように Webページが表示される」という状態が実現しづらくなるからである.
- 標準化されたもの以外にも, Web にはある一定の設計思想がある.
  - **RESTful** なシステム
    - 統一インターフェース：予め定義された方法で, 情報をやり取りする（HTTP など）.
    - アドレス可能性：すべての情報が一意な URL で表される.
    - 接続性：やり取りされる情報の中にはリンクを含めることができる.
    - ステートレス性：やり取りは1回ごとに完結し, 以前のやり取りの結果に依存しない.
  - **セマンティック Web**
    - XML　により, テキストが属性などの**メタデータ**を持つことで, 検索可能精度を大幅に高める Web の構造.
    - ただし, メタデータの付与の膨大さがボトルネックとなり, なかなか普及しない.

## Ch.2：Web とネットワーク技術
### コンピーターネットワーク
- コンピューターが互いに接続して情報のやり取りをするネットワークの中で, コンピューターは以下の2つに大別される.
  - **サーバー**：ネットワーク上で情報・サービスを提供する.
  - **クライアント**：サーバーから提供された情報・サービスを利用する.
- 自宅や会社などの小規模なコンピューターネットワークを互いに繋ぐのがインターネットである.
  - インターネットはプロバイダ（ISP）によって提供される.
  - ISP 同士が階層構造を持って繋がる（IX）ことで, 世界中のサーバー・クライアントと通信が可能になっている.

### 標準プロトコル
- **プロトコル**：ネットワークに接続された機器同士が通信するときの共通のルール・手順.
- **TCP/IP** はあらゆる機器があらゆる機器と通信できるという意味で, 標準のプロトコル群として利用されている.
  - **アプリケーション層**：クライアントとサーバーのやり取り規定し, ネットワークに適した形へデータを変換する役割を担う. e.g. HTTP, FTP など.
  - トランスポート層：データ分割やデータ品質の保証を規定する. e.g. TCP, UDP.
  - インターネット層：ネットワーク化の通信を規定する. e.g. IP, ICMP など.
  - ネットワークインターフェース層：ハードウェアに関する規定. e.g. Wi-Fi など.
- たとえば, ブラウザからサーバーにデータを要求した際には, 下層に行くにつれて規定に則ったヘッダーが追加され（カプセル化）, 上層に行くにつれてそのヘッダーが除去されていく（非カプセル化）ことで応答を行っている. 

### IPアドレス
- **IPアドレス**：インターネットに接続されたコンピューターを特定し, データの行き先を管理する.
  - ところが, IPアドレスだけでは Webサービスなのかメールサービスなのかというコンピューターの提供するサービスまでは分からない
  - これを補完するのが, **ポート番号**であり, これによって特定のコンピューターの特定のサービスを受けることが可能になっている.

### URL とドメイン
- URL に関しては, Chapter.1 に記載した通り.
- ただし, 認識性の問題から IPアドレスの代わりに**ドメイン**を使用している.
  - 一般にIPアドレスによって通信先を特定するため, ドメインは IPアドレスに変換可能である.
  - これを可能とするのが **DNS** という仕組みであり, これを提供するのが **DNSサーバー**と呼ばれる階層型のコンピューター群である.

## HTTP の仕組み
### HTTPメッセージ
- HTTP はクライアントである Webブラウザと, サーバーである Webサーバー間のやり取りをするが, そのやり取りで利用されるのが **HTTPメッセージ**である.
  - HTTPメッセージは, Webブラウザからの要求としての **HTTPリクエスト**と, Webサーバーからの応答である **HTTPレスポンス**に大別される.

### HTTPリクエストと HTTPレスポンス
#### HTTPリクエスト
- HTTP リクエストの構成
  - リクエスト行：Webサーバーに対する「（サーバーが持つ）どのデータに」「どのような処理がしたいか」の要求内容.
  - メッセージヘッダー：Webブラウザやバージョン, 対応可能なデータタイプなどの付加的な情報.
  - メッセージボディ：Webブラウザのフォームなど, 入力された内容.
- 要求の具体的な内容は **HTTPメソッド**によって, リクエスト行に記述される. Web サイトで主に利用されるのは以下の2つ.
    - **GET**メソッド：コンテンツの取得を取得する. データ送信には機密性の低い URLパラメータを利用する.
    - **POST**メソッド：データを Webサーバーに送信する. GET とは異なり, メッセージボディにデータが組み込まれるため, データ送信の機密性が高い.

#### HTTPレスポンス
- HTTPレスポンスの構成
  - ステータス行：HTTPリクエストに対する, Webサーバー内の処理結果.
  - メッセージヘッダー：Webサーバーの種類や, 送信するデータ形式などの付加情報.
  - メッセージボディ：クライアントから要求された HTML ファイルや画像などのデータ.
- 要求に対する処理結果は **ステータスコード**によって, ステータス行に記述される. ステータスコードは5つに分類される.
    - 100番台：HTTPリクエストが処理中であることの通知.
    - 200番台：HTTPリクエストに対して, 正常に処理が完了したことを通知.
    - 300番台：HTTPリクエストに対して, 転送やリダイレクトなど Webブラウザ側で追加処理が必要なことを通知する.
    - 400番台：リクエストが不正であったり, リクエスト対象が存在しないことを示すクライアント側のエラー通知.
    - 500番台：高負荷などのサーバー側のエラー通知.

#### メッセージヘッダー
- HTTPリクエスト・HTTPレスポンスの双方に含まれる HTTPメッセージに関する詳細な情報.
  - 一般ヘッダーフィールド：HTTPメッセージの作成日時など.
  - リクエストヘッダーフィールド：リクエスト先のサーバー名やリファラー, Webブラウザの固有情報など.
  - レスポンスヘッダーフィールド：リダイレクト先の Webページの情報や, Webサーバーの固有情報など.
  - エンティティヘッダーフィールド：メッセージボディ内のデータタイプやサイズ, 有効期限などコンテンツに関わる固有情報など.